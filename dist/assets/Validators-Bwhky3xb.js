import{j as e,o as t,M as a,F as s,g as r,y as i,D as d,N as l,A as n,B as c,C as o}from"./index-DAlTqEZr.js";import{r as x,R as m}from"./vendor-DKx09kD0.js";import{f as h,a as g,s as p}from"./formatters-Qc2P36Ej.js";const u=()=>{const[u,y]=x.useState([]),[j,b]=x.useState(!0),[k,N]=x.useState(null),[f,v]=x.useState({key:"stake",direction:"desc"}),[w,S]=x.useState(""),[V,C]=x.useState(""),[M,A]=x.useState("active"),[F,I]=x.useState({totalValidators:0,activeValidators:0,waitingValidators:0,jailedValidators:0,totalStake:"0",averageUptime:"0"});x.useEffect((()=>((async()=>{b(!0),N(null);try{setTimeout((()=>{try{const a=Array.from({length:50}).map(((e,t)=>{try{const e=t<40?"active":t<45?"waiting":"jailed",a=(25e20+1e21*Math.random()).toString();return{id:`validator_${t+1}`,name:`Dharitri Validator ${t+1}`,address:`erd1${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,status:e,stake:a,topUp:(BigInt(a)/BigInt(10)).toString(),locked:"jailed"===e?(BigInt(a)/BigInt(20)).toString():"0",numNodes:Math.floor(10*Math.random())+1,score:(85+15*Math.random()).toFixed(2),uptime:(95+5*Math.random()).toFixed(2),commission:(5+15*Math.random()).toFixed(1),delegators:Math.floor(500*Math.random())+50,website:Math.random()>.5?"https://example.com":null,identity:Math.random()>.7?"VALIDATOR_IDENTITY":null,shards:Array.from({length:Math.floor(3*Math.random())+1},(()=>Math.floor(3*Math.random())))}}catch(a){return{id:`validator_error_${t+1}`,name:`Default Validator ${t+1}`,address:`erd1defaultaddress${t}`,status:"active",stake:"2500000000000000000000",topUp:"250000000000000000000",locked:"0",numNodes:1,score:"90.00",uptime:"99.00",commission:"10.0",delegators:100,website:null,identity:null,shards:[0]}}})),s=a.filter((e=>"active"===e.status)).length,r=a.filter((e=>"waiting"===e.status)).length,i=a.filter((e=>"jailed"===e.status)).length;let d="0";try{d=a.reduce(((e,t)=>{try{return e+BigInt(t.stake||"0")}catch(a){return e}}),BigInt(0)).toString()}catch(e){}let l="0.00";try{l=(a.reduce(((e,t)=>{try{return e+parseFloat(t.uptime||"0")}catch(a){return e}}),0)/a.length).toFixed(2)}catch(t){}const n={totalValidators:a.length,activeValidators:s,waitingValidators:r,jailedValidators:i,totalStake:d,averageUptime:l};I(n),y(a),b(!1)}catch(a){N("Failed to generate validators data. Please try again."),b(!1)}}),800)}catch(e){N("Failed to fetch validators data. Please try refreshing the page."),b(!1)}})(),()=>{})),[]);const T=m.useMemo((()=>{if(!u||!u.length)return[];let e=[...u];return null!==f&&e.sort(((e,t)=>{if(!e||!t)return 0;if(!(f.key in e)||!(f.key in t))return 0;if("stake"!==f.key&&"topUp"!==f.key&&"locked"!==f.key){if("score"===f.key||"uptime"===f.key||"commission"===f.key){const a=parseFloat(e[f.key]||"0"),s=parseFloat(t[f.key]||"0");return a<s?"asc"===f.direction?-1:1:a>s?"asc"===f.direction?1:-1:0}{const a=String(e[f.key]||""),s=String(t[f.key]||"");return a<s?"asc"===f.direction?-1:1:a>s?"asc"===f.direction?1:-1:0}}try{const a=BigInt(e[f.key]||"0"),s=BigInt(t[f.key]||"0");return a<s?"asc"===f.direction?-1:1:a>s?"asc"===f.direction?1:-1:0}catch(a){return 0}})),e}),[u,f]),B=m.useMemo((()=>{if(!w)return T.filter((e=>"all"===M||e.status===M));const e=w.toLowerCase();return T.filter((t=>(t.name.toLowerCase().includes(e)||t.address.toLowerCase().includes(e)||t.website&&t.website.toLowerCase().includes(e))&&("all"===M||t.status===M)))}),[T,w,M]),R=e=>{let t="asc";f.key===e&&"asc"===f.direction&&(t="desc"),v({key:e,direction:t})},U=t=>f.key===t?"asc"===f.direction?e.jsx(c,{className:"inline-block ml-1"}):e.jsx(o,{className:"inline-block ml-1"}):e.jsx(o,{className:"inline-block ml-1 opacity-30"}),W=e=>{switch(e){case"active":return"text-green-500";case"waiting":return"text-yellow-500";case"jailed":return"text-red-500";default:return"text-gray-500"}};return k?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center bg-red-100 dark:bg-red-900/20 p-6 rounded-xl shadow-md",children:[e.jsx(t,{className:"text-red-500 dark:text-red-400 text-5xl mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Something Went Wrong"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6",children:k}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors inline-flex items-center",children:[e.jsx(a,{className:"mr-2"})," Retry"]})]})}):j?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Validators"}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-10",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading validators data..."})]})})]}):0===u.length?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Validators"}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-10 text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No validators found."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors",children:"Refresh"})]})]}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Validators"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-4",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Total Validators"}),e.jsx("p",{className:"text-2xl font-semibold",children:h(F.totalValidators)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-4",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Active"}),e.jsx("p",{className:"text-2xl font-semibold text-green-500",children:h(F.activeValidators)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-4",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Waiting"}),e.jsx("p",{className:"text-2xl font-semibold text-yellow-500",children:h(F.waitingValidators)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-4",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Jailed"}),e.jsx("p",{className:"text-2xl font-semibold text-red-500",children:h(F.jailedValidators)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-4",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Total Stake"}),e.jsx("p",{className:"text-2xl font-semibold",children:g(F.totalStake,18,"REWA")})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-4",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Avg. Uptime"}),e.jsxs("p",{className:"text-2xl font-semibold",children:[F.averageUptime,"%"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[e.jsxs("div",{className:"flex space-x-2 bg-white dark:bg-gray-900 rounded-lg shadow-sm p-1",children:[e.jsx("button",{className:"px-4 py-2 rounded-md "+("all"===M?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>A("all"),children:"All"}),e.jsx("button",{className:"px-4 py-2 rounded-md "+("active"===M?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>A("active"),children:"Active"}),e.jsx("button",{className:"px-4 py-2 rounded-md "+("waiting"===M?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>A("waiting"),children:"Waiting"}),e.jsx("button",{className:"px-4 py-2 rounded-md "+("jailed"===M?"bg-primary text-white":"hover:bg-gray-100 dark:hover:bg-gray-800"),onClick:()=>A("jailed"),children:"Jailed"})]}),e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(s,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search validators...",value:w,onChange:e=>{S(e.target.value)},className:"pl-10 pr-4 py-2 w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md overflow-hidden mb-8",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:()=>R("name"),children:["Validator ",U("name")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:()=>R("status"),children:["Status ",U("status")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:()=>R("stake"),children:["Stake ",U("stake")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:()=>R("numNodes"),children:["Nodes ",U("numNodes")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:()=>R("score"),children:["Score ",U("score")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:()=>R("uptime"),children:["Uptime ",U("uptime")]}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer",onClick:()=>R("commission"),children:["Commission ",U("commission")]})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:0===B.length?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"No validators found matching your criteria"})}):B.map((t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(r,{className:"text-gray-500 dark:text-gray-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[e.jsx("span",{className:"font-mono",children:p(t.address,8)}),e.jsx("button",{onClick:()=>{return e=t.address,a=t.id,navigator.clipboard.writeText(e),C(a),void setTimeout((()=>C("")),2e3);var e,a},className:"ml-2 text-primary hover:text-primary-dark",title:"Copy address",children:V===t.id?e.jsx(i,{className:"text-green-500"}):e.jsx(d,{})})]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{className:`mr-2 text-xs ${W(t.status)}`}),e.jsx("span",{className:"capitalize",children:t.status})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g(t.stake,18,"REWA")}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:t.numNodes}),t.shards&&t.shards.length>0&&e.jsx("div",{className:"flex mt-1 space-x-1",children:t.shards.map(((t,a)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200",children:["S",t]},a)))})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:parseFloat(t.score)>95?"text-green-500":parseFloat(t.score)>90?"text-yellow-500":"text-red-500",children:[t.score,"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:parseFloat(t.uptime)>98?"text-green-500":parseFloat(t.uptime)>95?"text-yellow-500":"text-red-500",children:[t.uptime,"%"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.commission,"%"]})]},t.id)))})]})})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(n,{className:"text-primary mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"About Validators"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Validators are essential participants in the Dharitri network who secure the blockchain by running validator nodes. They are responsible for processing transactions, creating new blocks, and maintaining consensus across the network."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium mb-2",children:"Validator Requirements"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsx("li",{children:"A minimum stake of 2,500 REWA is required to become a validator"}),e.jsx("li",{children:"Validators must maintain high-performance servers with specific hardware requirements"}),e.jsx("li",{children:"Technical knowledge is needed to properly set up and maintain validator nodes"}),e.jsx("li",{children:"Validators earn rewards for their service, including transaction fees and block rewards"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium mb-2",children:"Validator Statuses"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-green-500 font-medium",children:"Active"}),": Currently validating transactions and producing blocks"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-500 font-medium",children:"Waiting"}),": In the queue to become active at the next epoch"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-red-500 font-medium",children:"Jailed"}),": Temporarily removed from the validator set due to poor performance"]})]})]})]})]})]})};export{u as default};
