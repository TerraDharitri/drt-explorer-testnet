import{j as e,i as a,k as s,b as t,y as r,D as d,A as i}from"./index-DAlTqEZr.js";import{e as c,u as l,r as n,L as o}from"./vendor-DKx09kD0.js";import{f as m,c as x,t as h,s as g}from"./formatters-Qc2P36Ej.js";const p=()=>{const{blockId:p}=c(),y=l(),[u,b]=n.useState(null),[j,k]=n.useState(!0),[f,N]=n.useState(null),[v,w]=n.useState(!1),[q,S]=n.useState(1),[M]=n.useState(10);n.useEffect((()=>{(async()=>{k(!0),N(null);try{setTimeout((()=>{b({hash:"c8e12cfbd10ecadf8b7a9eef670e84f66a95a8efe0f7a88307b31d76191893ef",nonce:parseInt(p),prevBlockHash:"b9f85a3f986dbc7bd7e9afd91c030c59682c44242aac0a6b4cf63ce52eccd5d3",timestamp:(new Date).getTime()-9e5,round:18436789,epoch:812,shard:0,proposer:"erd1qqqqqqqqqqqqqpgqp699jngundfqw07d8jzkepucvpzush6k3wvqyc44rx",validators:400,size:82451,gasConsumed:55732642,gasRefunded:2142860,txCount:32,miniBlocks:4,stateRootHash:"40b7c1d3c6a9b5c2e3d1f0a8b7c6d5e4f3a2b1c0d9e8f7a6b5c4d3e2f1a0b9c8",transactions:Array.from({length:32}).map(((e,a)=>({hash:`tx${a}_${Math.random().toString(36).substring(2,15)}`,from:a%3==0?"erd1qyu5wthldzr8wx5c9ucg8kjagg0jfs53s8nr3zpz3hypefsdd8ssycr6th":`erd1${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,to:a%4==0?"erd1qqqqqqqqqqqqqpgqp699jngundfqw07d8jzkepucvpzush6k3wvqyc44rx":`erd1${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,value:Math.floor(1e18*Math.random()).toString(),fee:Math.floor(1e13*Math.random()).toString(),status:Math.random()>.2?"success":"failed",timestamp:(new Date).getTime()-9e5-1e3*Math.floor(100*Math.random())})))}),k(!1)}),800)}catch(e){N("Failed to fetch block details"),k(!1)}})()}),[p]);const B=e=>{switch(e){case"success":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"failed":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},z=q*M,C=z-M,T=(null==u?void 0:u.transactions.slice(C,z))||[],$=e=>S(e),D=[];if(u)for(let e=1;e<=Math.ceil(u.transactions.length/M);e++)D.push(e);return j?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})})}):f?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center text-red-500",children:[e.jsx("p",{children:f}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 btn-primary",children:"Retry"})]})}):u?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Block Details"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{u&&u.nonce>1&&y("/block/"+(u.nonce-1))},disabled:u.nonce<=1,className:"p-2 rounded-md border border-gray-300 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",title:"Previous Block",children:e.jsx(a,{className:"text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:()=>{u&&y(`/block/${u.nonce+1}`)},className:"p-2 rounded-md border border-gray-300 dark:border-gray-600",title:"Next Block",children:e.jsx(s,{className:"text-gray-600 dark:text-gray-400"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md mb-8",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary bg-opacity-10 p-3 rounded-full mr-4",children:e.jsx(t,{className:"text-primary h-6 w-6"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Block #",m(u.nonce)]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[x(u.timestamp)," (",h(u.timestamp),")"]})]})]})}),e.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 py-4 px-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Block Hash"}),e.jsxs("div",{className:"md:col-span-2 mt-1 md:mt-0 flex items-center",children:[e.jsx("span",{className:"font-mono text-sm text-gray-900 dark:text-gray-200 break-all",children:u.hash}),e.jsx("button",{onClick:()=>{return e=u.hash,navigator.clipboard.writeText(e),w(!0),void setTimeout((()=>w(!1)),2e3);var e},className:"ml-2 text-primary hover:text-primary-dark transition-colors",title:"Copy to clipboard",children:v?e.jsx(r,{}):e.jsx(d,{})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 py-4 px-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Timestamp"}),e.jsxs("div",{className:"md:col-span-2 text-sm text-gray-900 dark:text-gray-200 mt-1 md:mt-0",children:[x(u.timestamp)," (",h(u.timestamp),")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 py-4 px-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Transactions"}),e.jsx("div",{className:"md:col-span-2 text-sm text-gray-900 dark:text-gray-200 mt-1 md:mt-0",children:m(u.txCount)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 py-4 px-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Size"}),e.jsxs("div",{className:"md:col-span-2 text-sm text-gray-900 dark:text-gray-200 mt-1 md:mt-0",children:[m(u.size)," bytes"]})]}),u.proposer&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 py-4 px-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Proposer"}),e.jsx("div",{className:"md:col-span-2 mt-1 md:mt-0",children:e.jsx(o,{to:`/account/${u.proposer}`,className:"text-primary hover:underline",children:g(u.proposer,12)})})]}),void 0!==u.shard&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 py-4 px-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Shard"}),e.jsx("div",{className:"md:col-span-2 text-sm text-gray-900 dark:text-gray-200 mt-1 md:mt-0",children:u.shard})]})]})]}),u.transactions.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Transactions"}),e.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Hash"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"From"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"To"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:T.map(((a,s)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(o,{to:`/transaction/${a.hash}`,className:"text-primary hover:underline",children:g(a.hash,8)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(o,{to:`/account/${a.from}`,className:"text-primary hover:underline",children:g(a.from,8)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(o,{to:`/account/${a.to}`,className:"text-primary hover:underline",children:g(a.to,8)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[(Number(a.value)/1e18).toFixed(4)," ","REWA"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${B(a.status)}`,children:a.status})})]},s)))})]})})})]}),D.length>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("nav",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>$(q>1?q-1:1),disabled:1===q,className:"px-3 py-1 rounded-md "+(1===q?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:"Previous"}),D.map((a=>e.jsx("button",{onClick:()=>$(a),className:"px-3 py-1 rounded-md "+(q===a?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:a},a))),e.jsx("button",{onClick:()=>$(q<D.length?q+1:D.length),disabled:q===D.length,className:"px-3 py-1 rounded-md "+(q===D.length?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),children:"Next"})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 mt-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(i,{className:"text-primary mr-2"}),e.jsx("h2",{className:"text-lg font-semibold",children:"About Blocks"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Blocks are batches of transactions confirmed and stored on the blockchain. Each block contains a reference to the previous block, creating a chain of blocks (hence, blockchain). The Dharitri blockchain uses a sharded architecture with multiple shard chains processing transactions in parallel for high scalability."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium mb-2",children:"Key Block Components"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Hash"}),": A unique identifier for the block"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Nonce"}),": Block number in the blockchain"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Timestamp"}),": When the block was created"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Proposer"}),": Validator that proposed the block"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"State Root"}),": Hash representing the state of the blockchain"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium mb-2",children:"Dharitri Sharding"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dharitri uses three types of shards: regular shards (0, 1, 2...) for processing transactions, a Metachain for notarizing and finalizing results, and a special public service shard. The sharding model enables the network to process thousands of transactions per second with low latency."})]})]})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Block not found"}),e.jsx(o,{to:"/blocks",className:"mt-4 btn-primary inline-block",children:"View All Blocks"})]})})};export{p as default};
